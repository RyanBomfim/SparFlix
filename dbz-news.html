<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sparflix - Notícias</title>

  <!-- Favicon e Fonts -->
  <link href="assets/img/logo.png" rel="icon" />
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />

  <!-- Vendor CSS -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/aos/aos.css" rel="stylesheet" />

  <!-- Main CSS -->
  <link href="assets/css/style.css" rel="stylesheet" />

  <style>
    /* Estilos específicos */
    .news-card .card-img-top { height: 200px; object-fit: cover; transition: transform 0.3s; }
    .news-card:hover .card-img-top { transform: scale(1.05); }
    .tag-badge { cursor: pointer; margin-right: 6px; }
    .active-tag { background:#0d6efd; color:#fff; }
    .news-meta { font-size: 0.9rem; color: #6c757d; }
    .no-results { text-align:center; padding:40px 0; color:#6c757d; }
    .cursor-pointer { cursor: pointer; }
  </style>
</head>
<body>

<!-- Header -->
<header class="header d-flex align-items-center sticky-top bg-dark">
  <div class="container d-flex justify-content-between align-items-center">
    <a href="index.html" class="logo d-flex align-items-center">
      <img src="assets/img/logo.png" alt="Sparflix" style="height:46px;">
    </a>
    <nav class="navmenu">
      <ul class="d-flex list-unstyled mb-0">
        <li class="me-3"><a href="index.html">Home</a></li>
        <li class="me-3"><a href="about.html">Sobre</a></li>
        <li class="me-3"><a href="dbz-movies.html">Filmes</a></li>
        <li><a href="dbz-news.html" class="active">Notícias</a></li>
      </ul>
    </nav>
    <div class="header-social-links">
      <a href="mailto:ryanocbomfim@gmail.com"><i class="bi bi-google"></i></a>
      <a href="https://www.instagram.com/iam.ryan10" target="_blank"><i class="bi bi-instagram"></i></a>
    </div>
  </div>
</header>

<!-- Main -->
<main class="container my-5">

  <!-- Page Title -->
  <h1 class="mb-4 text-center dbz-sub-title">N<span class="dbz-o">O</span>tícias</h1>

  <!-- Busca e filtros -->
  <div class="row mb-4 g-3 align-items-center">
    <div class="col-md-6">
      <input id="searchInput" class="form-control" type="search" placeholder="Buscar notícias..." />
    </div>
    <div class="col-md-3">
      <select id="categorySelect" class="form-select">
        <option value="">Todas as categorias</option>
        <option value="Filmes">Filmes</option>
        <option value="Mangá">Mangá</option>
        <option value="Eventos">Eventos</option>
        <option value="Análises">Análises</option>
        <option value="Entrevistas">Entrevistas</option>
      </select>
    </div>
    <div class="col-md-3 text-end">
      <button id="clearFilters" class="btn btn-outline-secondary">Limpar filtros</button>
    </div>
  </div>

  <!-- Noticias principais (horizontais) -->
  <div id="mainNews" class="mb-5"></div>

  <!-- Noticias extras (cards verticais) -->
  <div class="row" id="extraNews"></div>

  <!-- Paginação -->
  <nav aria-label="Paginação notícias" class="mt-4">
    <ul id="pagination" class="pagination justify-content-center"></ul>
  </nav>
</main>

<!-- Modal -->
<div class="modal fade" id="newsModal" tabindex="-1" aria-labelledby="newsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title" id="newsModalLabel"></h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center">
        <img id="modalImage" class="img-fluid mb-3" alt="">
        <div id="modalMeta" class="news-meta mb-3"></div>
        <div id="modalContent"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>

<footer class="footer light-background mt-5 py-4 text-center">
  <div class="container">
    <p>© 2025 <strong>SparTask / Sparflix</strong> | Projeto de Conclusão de Curso - ETEC</p>
  </div>
</footer>

<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script>
const noticias = [
  {id:1,titulo:"Dragon Ball Daima ganha trailer inédito",texto:"O novo trailer revelou cenas inéditas com Goku e Vegeta em versões infantis.",imagem:"https://tse1.mm.bing.net/th/id/OIP.OGcMkd5BZN-yjbmqWjH70gHaEK?rs=1&pid=ImgDetMain&o=7&rm=3",atualizado:"há 10 minutos",categoria:"Filmes",tags:["Goku","Trailer"]},
  {id:2,titulo:"Akira Toriyama é homenageado",texto:"Evento em Tóquio trouxe artes originais e depoimentos de grandes nomes do mangá.",imagem:"https://tse4.mm.bing.net/th/id/OIP.FrJfeI43cqYt2s74odjZswAAAA?rs=1&pid=ImgDetMain&o=7&rm=3",atualizado:"há 2 horas",categoria:"Eventos",tags:["Toriyama","Evento"]},
  {id:3,titulo:"Novo jogo de Dragon Ball anunciado",texto:"Novo jogo para consoles de nova geração com gráficos avançados e história inédita.",imagem:"https://tse4.mm.bing.net/th/id/OIP.Iq0hrF5VxlkXZdOAKynFUQHaEK?rs=1&pid=ImgDetMain&o=7&rm=3",atualizado:"há 1 dia",categoria:"Filmes",tags:["Jogo","Bandai"]}
];

const noticiasExtras = [
  {id:4,titulo:"Dragon Ball Super retorna em 2025",texto:"Nova saga com foco em batalhas épicas e desenvolvimento dos personagens.",imagem:"https://tse2.mm.bing.net/th/id/OIP.Ps7BDsG9s1GwcwV2ZTkz8QHaEK?rs=1&pid=ImgDetMain",atualizado:"há 3 dias",categoria:"Filmes",tags:["Super","Saga"]},
  {id:5,titulo:"Novo mangá spin-off",texto:"História explorará as origens de Freeza, Cell e Majin Buu.",imagem:"https://tse2.mm.bing.net/th/id/OIP.q1NDbE8F0plzDLhRG5FlHgHaEK?rs=1&pid=ImgDetMain",atualizado:"há 5 dias",categoria:"Mangá",tags:["Mangá","SpinOff"]},
  {id:6,titulo:"Coleção especial de figures",texto:"Coleção premium de action figures de Dragon Ball com iluminação e detalhes realistas.",imagem:"https://tse1.mm.bing.net/th/id/OIP.-lZuJhxW1P6Gklf1XD7j1AHaEK?rs=1&pid=ImgDetMain",atualizado:"há 1 semana",categoria:"Filmes",tags:["Figures","Coleção"]}
];

const perPage = 3;
let tagFilter = "";
let newsModal = null;

document.addEventListener("DOMContentLoaded",()=>{
  newsModal = new bootstrap.Modal(document.getElementById('newsModal'));
  document.getElementById('searchInput').addEventListener('input',()=>renderNews(1));
  document.getElementById('categorySelect').addEventListener('change',()=>renderNews(1));
  document.getElementById('clearFilters').addEventListener('click',()=>{
    document.getElementById('searchInput').value='';
    document.getElementById('categorySelect').value='';
    tagFilter='';
    renderNews(1);
  });
  renderNews(1);
});

function renderNews(page=1){
  const q = document.getElementById('searchInput').value.toLowerCase();
  const category = document.getElementById('categorySelect').value;

  const filteredMain = noticias.filter(a=>{
    const matchSearch = q==="" || (a.titulo + " " + a.texto + " " + a.tags.join(" ")).toLowerCase().includes(q);
    const matchCategory = !category || a.categoria===category;
    const matchTag = !tagFilter || a.tags.includes(tagFilter);
    return matchSearch && matchCategory && matchTag;
  });

  const filteredExtra = noticiasExtras.filter(a=>{
    const matchSearch = q==="" || (a.titulo + " " + a.texto + " " + a.tags.join(" ")).toLowerCase().includes(q);
    const matchCategory = !category || a.categoria===category;
    const matchTag = !tagFilter || a.tags.includes(tagFilter);
    return matchSearch && matchCategory && matchTag;
  });

  // Render principais (horizontais)
  const mainContainer = document.getElementById('mainNews');
  mainContainer.innerHTML="";
  filteredMain.forEach(a=>{
    const card = document.createElement('div');
    card.className="card mb-4 bg-dark shadow-lg border-0 cursor-pointer";
    card.innerHTML=`
      <div class="row g-0">
        <div class="col-md-4"><img src="${a.imagem}" class="img-fluid rounded-start" alt="${a.titulo}"></div>
        <div class="col-md-8 p-3">
          <h3 class="text-white">${a.titulo}</h3>
          <p class="text-light">${a.texto}</p>
          <small class="text-warning">Última atualização ${a.atualizado}</small>
        </div>
      </div>`;
    card.onclick=()=>openModal(a);
    mainContainer.appendChild(card);
  });

  // Render extras (cards verticais)
  const extraContainer = document.getElementById('extraNews');
  extraContainer.innerHTML="";
  filteredExtra.forEach(a=>{
    const col = document.createElement('div');
    col.className="col-lg-4 col-md-6 mb-4";
    const card = document.createElement('div');
    card.className="card h-100 bg-dark text-light shadow-lg border-0 cursor-pointer";
    card.innerHTML=`
      <img src="${a.imagem}" class="card-img-top rounded-top" alt="${a.titulo}">
      <div class="card-body">
        <h5>${a.titulo}</h5>
        <p>${a.texto}</p>
        <div>${a.tags.map(t=>`<span class="badge bg-light text-dark tag-badge ${t===tagFilter?'active-tag':''}" onclick="filterByTag('${t}')">${t}</span>`).join(' ')}</div>
      </div>
      <div class="card-footer border-0"><small class="text-body-secondary">Última atualização ${a.atualizado}</small></div>`;
    card.onclick=()=>openModal(a);
    col.appendChild(card);
    extraContainer.appendChild(col);
  });

  renderPagination(1,1); // opcional: aqui pode implementar paginação real se desejar
}

function openModal(article){
  document.getElementById('newsModalLabel').textContent = article.titulo;
  const img = document.getElementById('modalImage');
  img.src = article.imagem;
  img.alt = article.titulo;
  document.getElementById('modalMeta').textContent = `Última atualização ${article.atualizado} • ${article.categoria}`;
  document.getElementById('modalContent').innerHTML = `<p>${article.texto}</p>`;
  newsModal.show();
}

function filterByTag(tag){
  tagFilter = (tagFilter===tag)?"":tag;
  renderNews(1);
}

function renderPagination(total,current){
  // Aqui você pode implementar a paginação completa, se quiser
}
</script>
</body>
</html>
